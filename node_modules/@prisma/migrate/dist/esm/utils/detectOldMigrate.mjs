var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
import fs from "fs";
import path from "path";
import { OldMigrateDetectedError } from "./errors";
function isOldMigrate(migrationDirPath) {
  return fs.existsSync(path.join(migrationDirPath, "migrate.lock"));
}
__name(isOldMigrate, "isOldMigrate");
function throwUpgradeErrorIfOldMigrate(schemaPath) {
  if (!schemaPath) {
    return;
  }
  const migrationDirPath = path.join(path.dirname(schemaPath), "migrations");
  if (isOldMigrate(migrationDirPath)) {
    throw new OldMigrateDetectedError();
  }
}
__name(throwUpgradeErrorIfOldMigrate, "throwUpgradeErrorIfOldMigrate");
export {
  isOldMigrate,
  throwUpgradeErrorIfOldMigrate
};
